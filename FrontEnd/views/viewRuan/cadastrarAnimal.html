<!--
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ADAPV</title>
  <link rel="website icon" type="png" href="/public/images/patinha.png">  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            carmesim: '#A6032F',
            areia: '#BCAF9E',
            noturno: '#0B1926',
            pastel: '#D9CAB8',
            neve: '#F2F2F2',
          },
        },
      },
    };
  </script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script src="/public/js/api.js"></script>
</head>
<body class="flex h-screen bg-neve font-sans text-noturno">

  <script src="/public/js/menu.js"></script>
  <main class="flex-1 bg-neve p-10 overflow-auto">
    <h1 class="text-2xl font-bold mb-6">Cadastro de Animal</h1>

    <form onsubmit="return salvarAnimal(event)" enctype="multipart/form-data">
      <div class="grid md:grid-cols-2 gap-4">

        <div>
          <label class="block font-semibold mb-1">*Nome</label>
          <input type="text" id="nome" class="w-full p-2 border rounded-lg" required>
        </div>

        <div>
          <label class="block font-semibold mb-1">*Idade (em anos)</label>
          <input type="number" id="idade" class="w-full p-2 border rounded-lg" min="0" required>
        </div>

        <div>
          <label class="block font-semibold mb-1">*Tipo</label>
          <select id="tipo" class="w-full p-2 border rounded-lg" required>
            <option value="">Selecione</option>
            <option value="CACHORRO">Cachorro</option>
            <option value="GATO">Gato</option>
          </select>
        </div>

        <div>
          <label class="block font-semibold mb-1">*Sexo</label>
          <select id="sexo" class="w-full p-2 border rounded-lg" required>
            <option value="">Selecione</option>
            <option value="MACHO">Macho</option>
            <option value="FEMEA">Fêmea</option>
          </select>
        </div>
    <div>
          <label class="block font-semibold mb-1">*Porte</label>
          <select id="porte" class="w-full p-2 border rounded-lg" required>
            <option value="">Selecione</option>
            <option value="GRANDE">Grande</option>
            <option value="MEDIO">Medio</option>
            <option value="PEQUENO">Pequeno</option>
          </select>
        </div>
        <div>
          <label class="block font-semibold mb-1">*Raça</label>
          <input type="text" id="raca" class="w-full p-2 border rounded-lg" required>
        </div>

        <div>
          <label class="block font-semibold mb-1">*Pelagem</label>
          <input type="text" id="pelagem" class="w-full p-2 border rounded-lg">
        </div>

        <div>
          <label class="block font-semibold mb-1">*Peso (kg)</label>
          <input type="number" step="0.01" id="peso" class="w-full p-2 border rounded-lg">
        </div>

        <div>
          <label class="block font-semibold mb-1">*Baia</label>
         <input type="text" id="baia" class="w-full p-2 border rounded-lg">
        </div>

        <div>
          <label class="block font-semibold mb-1">*Data de Resgate</label>
          <input type="date" id="resgate" class="w-full p-2 border rounded-lg" required>
        </div>
          <div class="md:col-span-2">
          <label class="block font-semibold mb-1">*Castrado?</label>
          <div class="flex gap-4 mt-1">
            <label class="inline-flex items-center">
              <input type="radio" name="castrado" value="1" class="mr-2" checked>
              Sim
            </label>
            <label class="inline-flex items-center">
              <input type="radio" name="castrado" value="0" class="mr-2">
              Não
            </label>
          </div>
        </div>
        <div class="md:col-span-2">
          <label class="block font-semibold mb-1">*Disponível para Adoção?</label>
          <div class="flex gap-4 mt-1">
            <label class="inline-flex items-center">
              <input type="radio" name="adocao" value="1" class="mr-2" checked>
              Sim
            </label>
            <label class="inline-flex items-center">
              <input type="radio" name="adocao" value="0" class="mr-2">
              Não
            </label>
          </div>
        </div>

        <div class="md:col-span-2">
          <label class="block font-semibold mb-1">Foto do Animal</label>
          <input type="file" id="foto" class="w-full p-2 border rounded-lg" accept="image/*">
        </div>

      </div>
       <div>
          <label class="block font-semibold mb-1">Observações</label>
          <textarea rows="3" id="obs" class="w-full p-3 border border-gray-300 rounded-lg" placeholder="Ex: Local de resgate, Temperamento do aniaml"></textarea>
        </div>
      <div class="text-right mt-6">
        <button type="submit" class="bg-carmesim text-white px-6 py-2 rounded-full hover:bg-[#8a0128] transition-all">
          Cadastrar Animal
        </button>
      </div>
    </form>
  </main>
    
  <script>
    // Mantém o createIcons global
    lucide.createIcons();
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Cadastro de Animal - SoftPet</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f2f8fc;
            padding: 20px;
            max-width: 600px;
            margin: auto;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        form {
            background: white;
            padding: 20px;
            border-radius: 6px;
            box-shadow: 0 0 10px #ccc;
        }
        label {
            display: block;
            margin-top: 15px;
            font-weight: bold;
            color: #555;
        }
        input[type="text"],
        input[type="number"],
        input[type="date"],
        select,
        textarea {
            width: 100%;
            padding: 8px;
            margin-top: 5px;
            border-radius: 4px;
            border: 1px solid #aaa;
            box-sizing: border-box;
        }
        input[type="checkbox"] {
            margin-right: 5px;
        }
        input[type="file"] {
            margin-top: 5px;
        }
        button {
            margin-top: 20px;
            padding: 12px 20px;
            background: #007bff;
            border: none;
            border-radius: 4px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
        }
        button:hover {
            background: #0056b3;
        }
        .message {
            margin-top: 15px;
            padding: 10px;
            border-radius: 4px;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>

<h1>Cadastro de Animal</h1>

<form id="formCadastroAnimal">
    <label for="nome">Nome *</label>
    <input type="text" id="nome" name="nome" required />

    <label for="idade">Idade (anos) *</label>
    <input type="number" id="idade" name="idade" min="0" required />

    <label for="tipo">Tipo *</label>
    <input type="text" id="tipo" name="tipo" required />

    <label for="sexo">Sexo *</label>
    <select id="sexo" name="sexo" required>
        <option value="" disabled selected>Selecione</option>
        <option value="M">Macho</option>
        <option value="F">Fêmea</option>
    </select>

    <label for="porte">Porte *</label>
    <input type="text" id="porte" name="porte" required />

    <label for="raca">Raça *</label>
    <input type="text" id="raca" name="raca" required />

    <label for="pelagem">Pelagem *</label>
    <input type="text" id="pelagem" name="pelagem" required />

    <label for="peso">Peso (kg) *</label>
    <input type="number" id="peso" name="peso" min="0" required />

    <label for="baia">Baia *</label>
    <input type="text" id="baia" name="baia" required />

    <label for="resgate">Data do Resgate *</label>
    <input type="date" id="resgate" name="resgate" required />

    <label>
        <input type="checkbox" id="adocao" name="adocao" />
        Disponível para Adoção
    </label>

    <label>
        <input type="checkbox" id="castrado" name="castrado" />
        Castrado
    </label>

    <label>
        <input type="checkbox" id="ativo" name="ativo" checked />
        Ativo
    </label>

    <label for="foto">Foto</label>
    <input type="file" id="foto" name="foto" accept="image/*" />

    <label for="obs">Observações</label>
    <textarea id="obs" name="obs" rows="3"></textarea>

    <button type="submit">Cadastrar Animal</button>
</form>

<div id="msg" class="message" style="display:none;"></div>

<script>
    const form = document.getElementById('formCadastroAnimal');
    const msgDiv = document.getElementById('msg');

    form.addEventListener('submit', async (e) => {
        e.preventDefault();
        msgDiv.style.display = 'none';
        msgDiv.textContent = '';
        msgDiv.className = 'message';

        const formData = new FormData(form);

        // Ajustar valores de checkbox para true/false
        formData.set('adocao', form.adocao.checked);
        formData.set('castrado', form.castrado.checked);
        formData.set('ativo', form.ativo.checked);

        try {
            const response = await fetch('http://localhost:8080/animal/cadastrar', {
                method: 'POST',
                body: formData
            });

            if (response.ok) {
                const data = await response.json();
                msgDiv.textContent = `Animal cadastrado com sucesso! ID: ${data.cod || data.id || 'desconhecido'}`;
                msgDiv.classList.add('success');
                form.reset();
            } else {
                const errorText = await response.text();
                msgDiv.textContent = `Erro: ${errorText}`;
                msgDiv.classList.add('error');
            }
        } catch (error) {
            msgDiv.textContent = `Erro de conexão: ${error.message}`;
            msgDiv.classList.add('error');
        }

        msgDiv.style.display = 'block';
    });
</script>

</body>
</html>
-->
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SoftPet - Cadastrar Animal</title>
  <link rel="website icon" type="png" href="../../public/images/patinha.png">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            carmesim: '#A6032F',
            areia: '#BCAF9E',
            noturno: '#0B1926',
            pastel: '#D9CAB8',
            neve: '#F2F2F2',
          },
        },
      },
    };
  </script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="flex h-screen bg-neve font-sans text-noturno">
  <!-- Sidebar -->
  <script src="../../public/js/menu.js"></script>

  <!-- Conteúdo Principal -->
  <main class="flex-1 p-8 overflow-y-auto">
    <div class="flex items-center justify-between mb-6">
      <h1 class="text-3xl font-bold text-carmesim">Cadastrar Animal</h1>
      <a href="consultaAnimal.html"
         class="bg-carmesim text-white px-6 py-3 rounded-full font-semibold hover:bg-[#8a0128] transition-all">
        Ver Animais
      </a>
    </div>

    <section>
      <form id="formCadastroAnimal" class="grid md:grid-cols-2 gap-4">
        <!-- Inputs -->
        <div>
          <label class="block font-semibold mb-1">* Nome</label>
          <input type="text" id="nome" name="nome" class="w-full p-3 border border-gray-300 rounded-lg" required>
        </div>

        <div>
          <label class="block font-semibold mb-1">* Idade (anos)</label>
          <input type="number" id="idade" name="idade" min="0" class="w-full p-3 border border-gray-300 rounded-lg" required>
        </div>

        <div>
          <label class="block font-semibold mb-1">* Tipo</label>
          <input type="text" id="tipo" name="tipo" class="w-full p-3 border border-gray-300 rounded-lg" required>
        </div>

        <div>
          <label class="block font-semibold mb-1">* Sexo</label>
          <select id="sexo" name="sexo" class="w-full p-3 border border-gray-300 rounded-lg" required>
            <option value="" disabled selected>Selecione</option>
            <option value="M">Macho</option>
            <option value="F">Fêmea</option>
          </select>
        </div>

        <div>
          <label class="block font-semibold mb-1">* Porte</label>
          <input type="text" id="porte" name="porte" class="w-full p-3 border border-gray-300 rounded-lg" required>
        </div>

        <div>
          <label class="block font-semibold mb-1">* Raça</label>
          <input type="text" id="raca" name="raca" class="w-full p-3 border border-gray-300 rounded-lg" required>
        </div>

        <div>
          <label class="block font-semibold mb-1">* Pelagem</label>
          <input type="text" id="pelagem" name="pelagem" class="w-full p-3 border border-gray-300 rounded-lg" required>
        </div>

        <div>
          <label class="block font-semibold mb-1">* Peso (kg)</label>
          <input type="number" id="peso" name="peso" min="0" class="w-full p-3 border border-gray-300 rounded-lg" required>
        </div>

        <div>
          <label class="block font-semibold mb-1">* Baia</label>
          <input type="text" id="baia" name="baia" class="w-full p-3 border border-gray-300 rounded-lg" required>
        </div>

        <div>
          <label class="block font-semibold mb-1">* Data do Resgate</label>
          <input type="date" id="resgate" name="resgate" class="w-full p-3 border border-gray-300 rounded-lg" required>
        </div>

        <!-- Checkboxes -->
        <div class="md:col-span-2 flex gap-6 pt-4">
          <label class="inline-flex items-center">
            <input type="checkbox" id="adocao" name="adocao" class="mr-2">
            Disponível para Adoção
          </label>
          <label class="inline-flex items-center">
            <input type="checkbox" id="castrado" name="castrado" class="mr-2">
            Castrado
          </label>
          <label class="inline-flex items-center">
            <input type="checkbox" id="ativo" name="ativo" class="mr-2" checked>
            Ativo
          </label>
        </div>

        <div class="md:col-span-2">
          <label class="block font-semibold mb-1">Foto</label>
          <input type="file" id="foto" name="foto" accept="image/*" class="w-full p-3 border border-gray-300 rounded-lg">
        </div>

        <div class="md:col-span-2">
          <label class="block font-semibold mb-1">Observações</label>
          <textarea id="obs" name="obs" rows="3" class="w-full p-3 border border-gray-300 rounded-lg"></textarea>
        </div>

        <div class="md:col-span-2 text-right pt-6">
          <button type="submit" class="bg-carmesim text-white px-6 py-3 rounded-full font-semibold hover:bg-[#8a0128] transition-all w-full md:w-auto">
            Cadastrar Animal
          </button>
        </div>
      </form>

      <div id="msg" class="mt-4 hidden p-3 rounded-lg" role="alert"></div>
    </section>
  </main>

  <script>
    const form = document.getElementById('formCadastroAnimal');
    const msgDiv = document.getElementById('msg');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      msgDiv.className = "mt-4 hidden p-3 rounded-lg";
      msgDiv.textContent = '';

      const formData = new FormData(form);

      formData.set('adocao', form.adocao.checked);
      formData.set('castrado', form.castrado.checked);
      formData.set('ativo', form.ativo.checked);

      try {
        const response = await fetch('http://localhost:8080/animal/cadastrar', {
          method: 'POST',
          body: formData
        });

        if (response.ok) {
          const data = await response.json();
          msgDiv.textContent = `Animal cadastrado com sucesso! ID: ${data.cod || data.id || 'desconhecido'}`;
          msgDiv.classList.add('bg-green-100', 'text-green-800', 'border', 'border-green-300');
          form.reset();
        } else {
          const errorText = await response.text();
          msgDiv.textContent = `Erro: ${errorText}`;
          msgDiv.classList.add('bg-red-100', 'text-red-800', 'border', 'border-red-300');
        }
      } catch (error) {
        msgDiv.textContent = `Erro de conexão: ${error.message}`;
        msgDiv.classList.add('bg-red-100', 'text-red-800', 'border', 'border-red-300');
      }

      msgDiv.classList.remove('hidden');
    });

    lucide.createIcons();
  </script>
</body>
</html>
